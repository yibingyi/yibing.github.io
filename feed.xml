<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Work Life</title>
    <description>å­¦ä¹  åˆ†äº« åšæŒ</description>
    <link>https://yibingyi.github.io/</link>
    <atom:link href="https://yibingyi.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sat, 17 Jun 2017 05:52:20 +0800</pubDate>
    <lastBuildDate>Sat, 17 Jun 2017 05:52:20 +0800</lastBuildDate>
    <generator>Jekyll v3.4.3</generator>
    
      <item>
        <title>expect shell auto ssh</title>
        <description>&lt;p&gt;å…ˆè¯´è¯´èƒŒæ™¯ï¼Œåœ¨ç°åœ¨çš„å·¥ä½œç¯å¢ƒä¸­ï¼Œæ¯æ¬¡éœ€è¦ç™»é™†çº¿ä¸Šæœºå™¨çš„æ—¶å€™ï¼Œç¬¬ä¸€æ­¥éœ€è¦åˆ°å ¡å’æœº[PIN+Token]ï¼Œç¬¬äºŒæ­¥åœ¨ç™»é™†åˆ°ä¸­æ§æœºï¼Œå¹¶ä¸”éœ€è¦å®Œæˆè§’è‰²åˆ‡æ¢ç­‰æ“ä½œï¼Œæ¯”è¾ƒç¹çï¼Œäºæ˜¯æƒ³åˆ°æ˜¯å¦èƒ½è‡ªåŠ¨å®Œæˆå‘¢ï¼Ÿäºæ˜¯å‘ç°äº†expectè¿™ä¸ªä¸œè¥¿ï¼å¾ˆæƒŠå–œï¼ï¼ˆè¯·åŸè°…å°ç™½çš„æ— çŸ¥ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å…ˆè¯´è¯´ä»€ä¹ˆæ˜¯&lt;a href=&quot;http://linuxcommand.org/man_pages/expect1.html&quot;&gt;expect shell?&lt;/a&gt;&lt;/strong&gt; &lt;br /&gt;
 å®˜æ–¹è§£é‡Šä¸ºï¼Œä¸€ç§ç”¨æ¥å’Œåº”ç”¨ç¨‹åºäº¤äº’çš„è„šæœ¬ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹expectè„šæœ¬çš„ç®€å•ä¾‹å­ï¼Œé¦–å…ˆè¦æ˜ç™½expectä¸æ˜¯bashçš„ä¸€ä¸ªå‘½ä»¤ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ç§shellï¼Œæ²¡æœ‰å®‰è£…è¿‡ï¼Œç‚¹å‡»&lt;a href=&quot;http://expect.sourceforge.net/&quot;&gt;å®‰è£…Expect&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;SSHåˆçª¥Expect Shell&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# è¿™ä¸€è¡Œå‘Šè¯‰æ“ä½œç³»ç»Ÿè„šæœ¬é‡Œçš„ä»£ç ä½¿ç”¨é‚£ä¸€ä¸ªshellæ¥æ‰§è¡Œã€‚ç±»æ¯”bash&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#!/usr/bin/expect&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# è®¾ç½®å˜é‡&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;name map
&lt;span class=&quot;c&quot;&gt;# expect shell if&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;root&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    puts &lt;span class=&quot;s2&quot;&gt;&quot;WRRN: you will login as root;&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# spawn æ˜¯expect shellçš„ä¸€ä¸ªå‘½ä»¤ ç”¨æ¥å‘èµ·ä¸€ä¸ªäº¤äº’åŠ¨ä½œ æ¯”å¦‚ç°åœ¨å°±æ˜¯åœ¨è¿›è¡Œä¸€æ¬¡ssh&lt;/span&gt;
spawn ssh &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;@host.name
&lt;span class=&quot;c&quot;&gt;# æ­¤å¤„expecté’ˆå¯¹spawnæ‰§è¡ŒåŠ¨ä½œçš„è¿”å›å€¼åšä¸åŒçš„æ“ä½œ&lt;/span&gt;
expect &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# å¦‚æœè¿”å›çš„å­—ç¬¦ä¸²åŒ…å«(yes/no)&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;(yes/no)?&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# å‘é€yeså¹¶å›è½¦ ç›¸å½“äºæˆ‘ä»¬åœ¨terminalä¸­è¾“å…¥äº†yeså¹¶å›è½¦&lt;/span&gt;
        send &lt;span class=&quot;s2&quot;&gt;&quot;yes&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# å¦‚æœè¿”å›çš„å­—ç¬¦ä¸²åŒ…å«password&lt;/span&gt;
        expect &lt;span class=&quot;s2&quot;&gt;&quot;password:&quot;&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# å‘é€pwdTokenå¹¶å›è½¦ ç›¸å½“äºæˆ‘ä»¬åœ¨terminalä¸­è¾“å…¥äº†pwdTokenå¹¶å›è½¦&lt;/span&gt;
        send &lt;span class=&quot;s2&quot;&gt;&quot;pwdToken&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# åŒç† ä¸èµ˜è¿°&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;password:&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# å‘å‡ºè¯·æ±‚è®©ç”¨æˆ·è¾“å…¥&lt;/span&gt;
            send_user &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\0&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;4;34m please input otp password : &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\0&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;0m &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# æ¥æ”¶ç”¨æˆ·æŒ‰ä¸‹å›è½¦é”®ä¹‹å‰è¾“å…¥çš„æ‰€æœ‰å­—ç¬¦&lt;/span&gt;
            expect_user -re &lt;span class=&quot;s2&quot;&gt;&quot;(.*)&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# å°†1111å’Œç”¨æˆ·è¾“å…¥æ‹¼æ¥èµ‹å€¼ç»™å˜é‡pwdToken&lt;/span&gt;
            &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;pwdToken 1111&lt;span class=&quot;nv&quot;&gt;$expect_out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1,string&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            send &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$pwdToken&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# expect æ‰§è¡Œå®Œæˆ å°†æ§åˆ¶æƒäº¤å›ç»™ç»ˆç«¯&lt;/span&gt;
interact

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;trcks&lt;/strong&gt;
å¦‚æœåœ¨ç¼–å†™expectè„šæœ¬çš„æ—¶å€™é‡åˆ°äº†é—®é¢˜ï¼Œå¯ä»¥è¾“å…¥å‘½ä»¤&lt;code class=&quot;highlighter-rouge&quot;&gt;expect&lt;/code&gt;è¿›è¡Œè°ƒè¯•&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;âœ  GitHub expect
&lt;span class=&quot;gp&quot;&gt;expect1.1&amp;gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;name china
china
&lt;span class=&quot;gp&quot;&gt;expect1.2&amp;gt; &lt;/span&gt;puts &lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt;
china
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Fri, 16 Jun 2017 23:00:00 +0800</pubDate>
        <link>https://yibingyi.github.io/learn/tool/2017/06/16/learn-expect.html</link>
        <guid isPermaLink="true">https://yibingyi.github.io/learn/tool/2017/06/16/learn-expect.html</guid>
        
        
        <category>learn</category>
        
        <category>tool</category>
        
      </item>
    
      <item>
        <title>shellå­¦ä¹ ç¬”è®°-åŸºç¡€çŸ¥è¯†ï¼ˆä¸€ï¼‰</title>
        <description>&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;|&lt;/code&gt; ç®¡é“ç¬¦&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#å°†å‰ä¸€ä¸ªå‘½ä»¤ä½œä¸ºåä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥&lt;/span&gt;
cat &amp;gt; t
who | wc -l  &lt;span class=&quot;c&quot;&gt;#crtl+d&lt;/span&gt;
chmod +x t	
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;#!&lt;/code&gt; æŒ‡å®šå¤„ç†è„šæœ¬æ‰€éœ€çš„shellï¼Œå¸¸è§shellæœ‰bashï¼Œè¿˜æœ‰expectæ­¤ç±»ä¸å¸¸è§çš„shell&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;printf&lt;/code&gt;  è¾“å‡º&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;%s&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; china
&lt;span class=&quot;c&quot;&gt;# è¾“å‡º china &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;IO&lt;/code&gt;é‡å®šå‘&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   &lt;span class=&quot;c&quot;&gt;# crtll+D æ–‡ä»¶ç»“å°¾&lt;/span&gt;
   &lt;span class=&quot;c&quot;&gt;# program &amp;gt; file å¯å°†programçš„æ ‡å‡†è¾“å‡ºä¿®æ”¹ä¸ºfile&lt;/span&gt;
   tr -d &lt;span class=&quot;s1&quot;&gt;'\r'&lt;/span&gt; &amp;lt; dos-file.txt &amp;gt; UNIX-file.txt &lt;span class=&quot;c&quot;&gt;#  å°†dos-file.txtä¸­çš„å›è½¦ç¬¦åˆ é™¤ï¼›å¹¶å°†ç»“æœè¾“å‡ºçš„UNIX-file.txt æ”¹å˜æ ‡å‡†è¾“å…¥å’Œè¾“å‡º&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;gt; ``&amp;gt;`` é‡å®šå‘ç¬¦å· ``&amp;gt;&amp;gt;`` å°†æ ‡å‡†è¾“å‡ºé™„ä»¶åˆ°é—®ä»·ç»“å°¾ä¹‹å
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   &lt;span class=&quot;c&quot;&gt;# å°†æ‰€æœ‰ä»¥dos-fileå¼€å¤´çš„ï¼Œä»¥.txtç»“å°¾çš„æ–‡ä»¶ä¸­æ‰€æœ‰çš„æ¢è¡Œç¬¦åˆ é™¤å¹¶è¾“å‡ºåˆ°big-UNIX-file.txt&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;f &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;dos-file&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.txt
   &lt;span class=&quot;k&quot;&gt;do 
   	&lt;/span&gt;tr -d &lt;span class=&quot;s1&quot;&gt;'\r'&lt;/span&gt; &amp;lt; &lt;span class=&quot;nv&quot;&gt;$f&lt;/span&gt; &amp;gt;&amp;gt; big-UNIX-file.txt
   &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;``|`` å»ºç«‹ç®¡é“ 
&amp;gt; ä½¿ç”¨ç®¡é“æ¯”ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶çš„é€Ÿåº¦å¿«çš„å¤š!
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   p1 | p2 &lt;span class=&quot;c&quot;&gt;# å°†p1çš„æ ‡å‡†è¾“å‡ºä½œä¸ºp2çš„æ ‡å‡†è¾“å…¥&lt;/span&gt;
   &lt;span class=&quot;c&quot;&gt;# å…ˆåˆ é™¤æ–‡ä»¶ä¸­çš„å›è½¦ç¬¦ ç„¶åå®Œæˆæ•°æ®çš„æ’åº æœ€åè¾“å‡ºåˆ°æ–‡ä»¶&lt;/span&gt;
   tr -d &lt;span class=&quot;s1&quot;&gt;'\r'&lt;/span&gt; &amp;lt; dos-file.txt | sort &amp;gt; UNINX-file.txt
      &lt;span class=&quot;sb&quot;&gt;```&lt;/span&gt;
    &amp;gt; tr &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; options &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;-char-list replace-char-list
    &amp;gt; è½¬æ¢å­—ç¬¦ï¼Œä¾‹å¦‚å°†å¤§å†™è½¬æ¢ä¸ºå°å†™ï¼Œåˆ é™¤å­—ç¬¦ç­‰

5. &lt;span class=&quot;sb&quot;&gt;``&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;``&lt;/span&gt; linux ä¼šæ²¿ç€pathå»æŸ¥æ‰¾å‘½ä»¤ 

   &lt;span class=&quot;sb&quot;&gt;```&lt;/span&gt;shell
   &lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;PATH
   &lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~
   mkdir bin
   mv user bin
   &lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;:&lt;span class=&quot;nv&quot;&gt;$HOME&lt;/span&gt;/bin
   user &lt;span class=&quot;c&quot;&gt;# è¢«shell å‘ç°å¹¶æ‰§è¡Œ&lt;/span&gt;
   &lt;span class=&quot;c&quot;&gt;## æœŸæœ›è¾“å‡º userçš„æ ‡å‡†è¾“å‡º &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;shell å‚æ•°&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cat &amp;gt; finduser &lt;span class=&quot;c&quot;&gt;# å°†å‘½ä»¤è¡Œçš„æ ‡å‡†è¾“å…¥è¾“å‡ºåˆ°æ–‡ä»¶finduser&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#ï¼ /bin/sh&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# finduser æŸ¥çœ‹ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„ç”¨æˆ·æ˜¯å¦ç™»é™†&lt;/span&gt;
who | grep &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# å½“å‚æ•°åˆ—è¡¨å¤šä»¥9ä¸ªçš„æ—¶å€™ éœ€ä½¿ç”¨{} eg. ${10}&lt;/span&gt;

chmod +x finduser &lt;span class=&quot;c&quot;&gt;# ä¸ºfinduseræ·»åŠ å¯æ‰§è¡Œæƒé™&lt;/span&gt;

./finduser yibing
&lt;span class=&quot;c&quot;&gt;# æœŸæœ›è¾“å‡º yibing æ˜¯å¦ç™»é™†  &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æ‰§è¡Œè·Ÿè¸ª&lt;/p&gt;
    &lt;blockquote&gt;
      &lt;p&gt;executing tracing 
ä½œç”¨ï¼š ä½¿shellæ˜¾ç¤ºæ¯ä¸ªè¢«æ‰§è¡Œçš„å‘½ä»¤&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cat tracel.sh
&lt;span class=&quot;c&quot;&gt;#! /bin/sh&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; -x &lt;span class=&quot;c&quot;&gt;# æ‰“å¼€è·Ÿè¸ª&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;1st &lt;span class=&quot;nb&quot;&gt;echo
set&lt;/span&gt; +x &lt;span class=&quot;c&quot;&gt;# å…³é—­è·Ÿè¸ª&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;2st &lt;span class=&quot;nb&quot;&gt;echo
&lt;/span&gt;crtl+D

chmod +x tracel.sh
./tracel.sh 

&lt;span class=&quot;c&quot;&gt;# é¢„æœŸè¾“å‡º&lt;/span&gt;
+ &lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;1st &lt;span class=&quot;nb&quot;&gt;echo
&lt;/span&gt;1st &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt;
+ &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; +x
2nd &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Fri, 16 Jun 2017 19:00:00 +0800</pubDate>
        <link>https://yibingyi.github.io/learn/shell/2017/06/16/learn-shell.html</link>
        <guid isPermaLink="true">https://yibingyi.github.io/learn/shell/2017/06/16/learn-shell.html</guid>
        
        
        <category>learn</category>
        
        <category>shell</category>
        
      </item>
    
      <item>
        <title>shellå­¦ä¹ ç¬”è®°-æ–‡æœ¬æ“ä½œï¼ˆäºŒï¼‰</title>
        <description>&lt;ol&gt;
  &lt;li&gt;åˆè¯†sed
    &lt;blockquote&gt;
      &lt;p&gt;æ­£åˆ™ &lt;code class=&quot;highlighter-rouge&quot;&gt;^&lt;/code&gt; åŒ¹é…ç´§æ¥çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨è¡Œæˆ–å­—ç¬¦ä¸²çš„èµ·å§‹å¤„ 
&lt;code class=&quot;highlighter-rouge&quot;&gt;$&lt;/code&gt; åŒ¹é…å‰é¢çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨å­—ç¬¦ä¸²çš„æœ«å°¾æ´»ç€è¡Œçš„ç»“æŸã€‚&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sed &lt;span class=&quot;s1&quot;&gt;'s/:.*//'&lt;/span&gt; /etc/passwd | sort -u 
&lt;span class=&quot;c&quot;&gt;#åˆ é™¤ç¬¬ä¸€ä¸ªå†’å·ä¹‹åçš„æ‰€æœ‰ä¸œè¥¿ï¼Œå¹¶æ’åºåˆ—è¡¨åˆ é™¤é‡å¤éƒ¨åˆ†&lt;/span&gt;

find /home/tolstoy -type d -print &lt;span class=&quot;c&quot;&gt;# æ‰“å°æ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨&lt;/span&gt;
	sed &lt;span class=&quot;s1&quot;&gt;'s;/home/tolstoy/;/home/lt/;'&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# æ›¿æ¢æ–‡ä»¶è·¯å¾„&lt;/span&gt;
		sed &lt;span class=&quot;s1&quot;&gt;'s/^/mkdir /'&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# sedæ·»åŠ mkdir&lt;/span&gt;
			sh -x &lt;span class=&quot;c&quot;&gt;# shellæ‰§è¡Œ&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;sedæ›¿æ¢ç»†èŠ‚
    &lt;blockquote&gt;
      &lt;p&gt;é™¤äº†æ–œæ ä¹‹å¤–è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–ç¬¦å·æ¥ä½œä¸ºå®šç•Œç¬¦&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sed &lt;span class=&quot;s1&quot;&gt;'s/\/home\/tolstoy\//\/home\/lt\//'&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# è‹¥åªèƒ½ä½¿ç”¨ â€˜/â€™ ä½œä¸ºå®šç•Œç¬¦çš„æ—¶å€™ ä¼šå¯¼è‡´å‘½ä»¤ä¸æ˜“è¯»&lt;/span&gt;
sed &lt;span class=&quot;s1&quot;&gt;'s;/home/tolstoy/;/home/lt/;'&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# æ›¿æ¢æ–‡ä»¶è·¯å¾„ ç”¨ â€˜;â€™ ä½œä¸ºå®šç•Œç¬¦ å‘½ä»¤å˜å¾—æ¸…æ™°&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
    &lt;blockquote&gt;
      &lt;p&gt;åœ¨sedä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;amp;&lt;/code&gt; ç”¨äºåŒ¹é…â€œä»æ­¤ç‚¹å¼€å§‹æ›¿ä»£æˆåŒ¹é…ä¸æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„æ•´ä¸ªæ–‡æœ¬&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sed &lt;span class=&quot;s1&quot;&gt;'s/ata/&amp;amp;, the capital of the south/'&lt;/span&gt;  myfile.txt
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
    &lt;blockquote&gt;
      &lt;p&gt;åœ¨sedä¸­ï¼Œ så‘½ä»¤é‡Œä»¥&lt;code class=&quot;highlighter-rouge&quot;&gt;g&lt;/code&gt;ç»“å°¾è¡¨ç¤ºå…¨å±€æ›¿æ¢ ä¸ç„¶åªä¼šæ›¿ä»£åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ª&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sed &lt;span class=&quot;s1&quot;&gt;'s/toy/weapon/g'&lt;/span&gt; myfile.txt &lt;span class=&quot;c&quot;&gt;# å…¨å±€æ›¿æ¢&lt;/span&gt;
sed &lt;span class=&quot;s1&quot;&gt;'s/toy/weapon/'&lt;/span&gt;  myfile.txt &lt;span class=&quot;c&quot;&gt;# å•ç‹¬æ›¿æ¢&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
    &lt;blockquote&gt;
      &lt;p&gt;é€šè¿‡ç®¡é“å¯ä»¥å°†sedå®ä½“ä¸²è”èµ·æ¥ ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;-e&lt;/code&gt; é€‰é¡¹&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sed -e &lt;span class=&quot;s1&quot;&gt;'s/foo/bar/g'&lt;/span&gt; -e &lt;span class=&quot;s1&quot;&gt;'s/chicken/cow/g'&lt;/span&gt; myfile.txt &lt;span class=&quot;c&quot;&gt;# ç¬¬ä¸€ç§&lt;/span&gt;

cat &amp;gt; fixup.sed
s/foo/bar/g
s/chicken/cow/g
s/china/america/g
myfile.txt
crtl+D

sed -f fixup.sed myfile.txt &lt;span class=&quot;c&quot;&gt;# ç¬¬äºŒç§&lt;/span&gt;

sed -f fixup.sed -e &lt;span class=&quot;s1&quot;&gt;'s/man/women/g'&lt;/span&gt; myfile.txt &lt;span class=&quot;c&quot;&gt;# ç¬¬ä¸‰ç§&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;åŒ¹é…ç‰¹å®šè¡Œ
    &lt;blockquote&gt;
      &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;,&lt;/code&gt; èŒƒå›´è¡¨è¾¾å¼  &lt;code class=&quot;highlighter-rouge&quot;&gt;!&lt;/code&gt; å¦å®šæ­£åˆ™è¡¨è¾¾å¼&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sed -n &lt;span class=&quot;s1&quot;&gt;'/&amp;lt;HTML&amp;gt;/p'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.html &lt;span class=&quot;c&quot;&gt;# æ‰“å°å«æœ‰htmlæ ‡ç­¾çš„è¡Œ&lt;/span&gt;
sed -n &lt;span class=&quot;s1&quot;&gt;'10,40p'&lt;/span&gt; foo.txt &lt;span class=&quot;c&quot;&gt;# ç”¨â€˜,â€™ è¡¨ç¤ºè¡ŒèŒƒå›´&lt;/span&gt;
sed &lt;span class=&quot;s1&quot;&gt;'/foo/,/bar/ s/baz/quux/g'&lt;/span&gt; foo.xml &lt;span class=&quot;c&quot;&gt;# åœ¨å·²fooå¼€å§‹ï¼Œbarç»“æŸçš„è¡Œä¸­è¿›è¡Œæ›¿æ¢&lt;/span&gt;

sed /used/ !s/new/used/g &lt;span class=&quot;c&quot;&gt;# å°†æ²¡æœ‰usedè¡Œä¸­çš„newæ›¿æ¢ä¸ºused&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Fri, 16 Jun 2017 19:00:00 +0800</pubDate>
        <link>https://yibingyi.github.io/learn/shell/2017/06/16/learn-shell-1.html</link>
        <guid isPermaLink="true">https://yibingyi.github.io/learn/shell/2017/06/16/learn-shell-1.html</guid>
        
        
        <category>learn</category>
        
        <category>shell</category>
        
      </item>
    
      <item>
        <title>disqus è¢«å¢™äº†</title>
        <description>&lt;h4 id=&quot;å…³äºæ­¤åšå®¢çš„è¯„è®ºæ¡†å·¥å…·ç®€å•è¯´ä¸‹æˆ‘çš„å¿ƒè·¯å†ç¨‹&quot;&gt;å…³äºæ­¤åšå®¢çš„è¯„è®ºæ¡†å·¥å…·ç®€å•è¯´ä¸‹æˆ‘çš„å¿ƒè·¯å†ç¨‹&lt;/h4&gt;

&lt;p&gt;step1: å¾ˆå¼€å¿ƒçš„å®Œæˆäº†&lt;code class=&quot;highlighter-rouge&quot;&gt;disqus&lt;/code&gt;çš„é…ç½®å’Œéƒ¨ç½²&lt;br /&gt;
step2: å‘ç°è¢«å¢™äº†ï¼Œ(ãƒ¼ãƒ¼ã‚›)ä¸å¼€å¿ƒ&lt;br /&gt;
step3: æ‰¾æ›¿ä»£æ–¹æ¡ˆï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;æœ‰è¨€&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;ç•…è¨€&lt;/code&gt;ï¼Œå¥½ä¸‘ï¼Œå¹¶ä¸”&lt;code class=&quot;highlighter-rouge&quot;&gt;æœ‰è¨€&lt;/code&gt;ä¸æ”¯æŒhttps&lt;br /&gt;
step4: å›å½’&lt;code class=&quot;highlighter-rouge&quot;&gt;disqus&lt;/code&gt;ï¼Œé‡‡ç”¨æ‡’åŠ è½½çš„æ–¹å¼&lt;br /&gt;
step5: å¿ƒå¥½ç´¯ğŸ’”&lt;/p&gt;
</description>
        <pubDate>Fri, 16 Jun 2017 19:00:00 +0800</pubDate>
        <link>https://yibingyi.github.io/learn/tool/2017/06/16/learn-first.html</link>
        <guid isPermaLink="true">https://yibingyi.github.io/learn/tool/2017/06/16/learn-first.html</guid>
        
        
        <category>learn</category>
        
        <category>tool</category>
        
      </item>
    
  </channel>
</rss>
